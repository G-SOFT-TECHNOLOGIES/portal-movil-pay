<!-- component -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">

<div>
  <div class="flex justify-end gap-2 self-center mx-8">
    <div class="flex items-center gap-2 mx-4">
      <div class="flex flex-col justify-end w-full text-center text-white">
        <div class="inline-flex items-center gap-2 px-4">
          <svg
            width="68"
            height="81"
            viewBox="0 0 68 81"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M30.2105 40.3157C30.8805 40.3157 31.5231 40.5819 31.9968 41.0556C32.4706 41.5294 32.7368 42.172 32.7368 42.842C32.7368 43.512 32.4706 44.1546 31.9968 44.6284C31.5231 45.1021 30.8805 45.3683 30.2105 45.3683H22.6315C21.9615 45.3683 21.3189 45.1021 20.8452 44.6284C20.3714 44.1546 20.1052 43.512 20.1052 42.842C20.1052 42.172 20.3714 41.5294 20.8452 41.0556C21.3189 40.5819 21.9615 40.3157 22.6315 40.3157H30.2105ZM45.3683 32.7368C45.3683 32.0667 45.1021 31.4242 44.6284 30.9504C44.1546 30.4766 43.512 30.2105 42.842 30.2105H22.6315C21.9615 30.2105 21.3189 30.4766 20.8452 30.9504C20.3714 31.4242 20.1052 32.0667 20.1052 32.7368C20.1052 33.4068 20.3714 34.0494 20.8452 34.5231C21.3189 34.9969 21.9615 35.2631 22.6315 35.2631H42.842C43.512 35.2631 44.1546 34.9969 44.6284 34.5231C45.1021 34.0494 45.3683 33.4068 45.3683 32.7368ZM22.6315 25.1578H42.842C43.512 25.1578 44.1546 24.8917 44.6284 24.4179C45.1021 23.9441 45.3683 23.3016 45.3683 22.6315C45.3683 21.9615 45.1021 21.3189 44.6284 20.8452C44.1546 20.3714 43.512 20.1052 42.842 20.1052H22.6315C21.9615 20.1052 21.3189 20.3714 20.8452 20.8452C20.3714 21.3189 20.1052 21.9615 20.1052 22.6315C20.1052 23.3016 20.3714 23.9441 20.8452 24.4179C21.3189 24.8917 21.9615 25.1578 22.6315 25.1578ZM52.9472 59.1215V68.8049C52.9474 69.1652 52.8407 69.5176 52.6405 69.8173C52.4404 70.117 52.1559 70.3506 51.8229 70.4885C51.49 70.6265 51.1236 70.6625 50.7702 70.5922C50.4167 70.5218 50.0921 70.3482 49.8373 70.0933L47.8946 68.1531L45.9519 70.0933C45.6971 70.3482 45.3725 70.5218 45.0191 70.5922C44.6656 70.6625 44.2992 70.6265 43.9663 70.4885C43.6334 70.3506 43.3488 70.117 43.1487 69.8173C42.9486 69.5176 42.8418 69.1652 42.842 68.8049V59.1215C40.9153 58.0145 39.4087 56.3015 38.5569 54.2492C37.7051 52.1969 37.5559 49.9205 38.1324 47.7745C38.709 45.6286 39.979 43.7335 41.7447 42.3844C43.5103 41.0354 45.6726 40.308 47.8946 40.3157C48.7486 40.3264 49.5977 40.4469 50.4209 40.6744V22.6315C50.4209 20.6215 49.6224 18.6938 48.2011 17.2724C46.7798 15.8511 44.8521 15.0526 42.842 15.0526H22.6315C20.6215 15.0526 18.6938 15.8511 17.2724 17.2724C15.8511 18.6938 15.0526 20.6215 15.0526 22.6315V52.9472C15.0526 54.9573 15.8511 56.885 17.2724 58.3063C18.6938 59.7277 20.6215 60.5262 22.6315 60.5262H35.2631C35.9331 60.5262 36.5757 60.7923 37.0494 61.2661C37.5232 61.7399 37.7894 62.3824 37.7894 63.0525C37.7894 63.7225 37.5232 64.3651 37.0494 64.8388C36.5757 65.3126 35.9331 65.5788 35.2631 65.5788H22.6315C19.2827 65.5748 16.0721 64.2426 13.7041 61.8746C11.3361 59.5066 10.004 56.2961 10 52.9472V22.6315C10.004 19.2827 11.3361 16.0721 13.7041 13.7041C16.0721 11.3361 19.2827 10.004 22.6315 10L42.842 10C46.1909 10.004 49.4014 11.3361 51.7694 13.7041C54.1374 16.0721 55.4695 19.2827 55.4735 22.6315V43.807C56.4631 44.9184 57.1917 46.2369 57.6058 47.6662C58.0199 49.0955 58.1091 50.5993 57.8669 52.0675C57.6247 53.5357 57.0572 54.9312 56.206 56.1517C55.3548 57.3722 54.2413 58.3869 52.9472 59.1215ZM52.9472 50.4209C52.9472 49.4216 52.6509 48.4447 52.0957 47.6138C51.5405 46.7829 50.7514 46.1353 49.8282 45.7529C48.9049 45.3705 47.889 45.2704 46.9089 45.4654C45.9288 45.6603 45.0285 46.1416 44.3219 46.8482C43.6153 47.5548 43.134 48.4551 42.9391 49.4352C42.7441 50.4153 42.8442 51.4312 43.2266 52.3545C43.609 53.2777 44.2566 54.0668 45.0875 54.622C45.9184 55.1772 46.8953 55.4735 47.8946 55.4735C49.2346 55.4735 50.5198 54.9412 51.4674 53.9937C52.4149 53.0461 52.9472 51.761 52.9472 50.4209Z"
              fill="#FAFAFA"
            />
          </svg>
          <span class="text-3xl text-white font-medium" matTooltip="Contrato"
            >Nº: {{ contrato.contract || "" }}</span
          >
        </div>
        <div
          *ngIf="cuentaTv?.expirationTime != null"
          class="ml-2 inset-x-0 top-0 w-full mx-auto text-md uppercase text-center font-light text-white"
        >
          <span
            class="inline-flex items-center gap-x-2"
            matTooltip="Fecha de vencimiento"
          >
            <mat-icon class="ml-2">event_busy</mat-icon>
            {{ cuentaTv?.expirationTime | date : "d/M/YYYY, h:mm a" }}
          </span>
        </div>
        <h1 class="font-medium text-2xl">
          {{ contrato.plan_type.name }}
        </h1>
      </div>
    </div>
  </div>

  <div class="">
    <div
      class="grid grid-cols-1 gap-4 {{
        contrato.contract_detail_product.length > 0
          ? 'lg:grid-cols-3'
          : 'lg:grid-cols-2'
      }}  "
    >
      <div class="p-2 lg:p-8 justify-center text-center ">
        <div
          class="py-4 max-w-lg mx-auto overflow-hidden shadow-lg text-white transition duration-500 bg-neutral-500 opacity-95 bg-center m-4 rounded-2xl"
        >
          <div class="space-y-4">
            
            <div class="px-6 py-4">
              <div class="space-y-5">
                <div class="font-bold text-xl mb-2">DATOS DE ACCESO G-TV</div>
                <div class="flex flex-col gap-x-4 px-10 gap-y-4 justify-evenly">
                  <div class="flex justify-between text-start p-2">
                    <form [formGroup]="cuenta" class="relative w-full">
                      <div>
                        <label
                          for="search"
                          class="block text-sm font-medium leading-6 text-white"
                          >Usuario</label
                        >
                        <div class="relative mt-2 flex items-center">
                          <input
                            type="text"
                            formControlName="username"
                            readonly
                            class="block w-full rounded-md py-1.5 px-1.5 pr-14 text-black  shadow-sm  bg-gray-300 sm:text-sm sm:leading-6"
                          />
                          <div
                            class="absolute inset-y-0 right-0 flex py-1.5 pr-1.5"
                          >
                            <mat-icon class="mat-18 mr-2"
                              >account_circle</mat-icon
                            >
                          </div>
                        </div>
                      </div>
                      <div class="w-full">
                        <label
                          for="search"
                          class="block text-sm font-medium leading-6 text-white"
                          >Contraseña</label
                        >
                        <div class="relative mt-1 flex items-center">
                          <input
                            matInput
                            type="text"
                            formControlName="password"
                            #password
                            pattern="[A-Za-z0-9]*"
                            [readonly]="is_edit"
                            maxlength="10"
                            required
                            class="block w-full rounded-md border-0 text-black py-1.5 px-1.5 pr-14 shadow-sm ring-1 ring-gray-300 sm:text-sm sm:leading-6"
                          />
                          <div
                            class="absolute inset-y-0 right-0 flex py-1.5 pr-1.5"
                          >
                            <mat-icon class="mat-18 mr-2">password</mat-icon>
                          </div>
                        </div>
                        <div class="flex justify-between">
                          <mat-hint align="start" class="text-xs"
                            >Ingresar solo cáracteres alfanuméricos
                          </mat-hint>
                          <mat-hint align="end" class="text-xs"
                            >{{ password.value.length }} / 10</mat-hint
                          >
                        </div>
                        <mat-error
                          *ngIf="
                            cuenta.controls['password'].hasError('pattern')
                          "
                          class="text-xs"
                        >
                          No permite caracteres especiales
                        </mat-error>
                        <mat-error
                          *ngIf="
                            cuenta.controls['password'].hasError('required')
                          "
                          class="text-xs"
                        >
                          La contraseña es <strong>obligatorio</strong>
                        </mat-error>
                      </div>
                      <div>
                        <label
                          for="search"
                          class="block text-sm font-medium leading-6 text-white"
                          >Pin</label
                        >
                        <div class="relative mt-1 flex items-center">
                          <input
                            type="text"
                            formControlName="pincode"
                            [readonly]="is_edit"
                            #pinCode
                            maxlength="4"
                            pattern="[0-9]*"
                            required
                            class="block w-full rounded-md border-0 py-1.5 px-1.5 pr-14 text-black  shadow-sm  placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"
                          />
                          <div
                            class="absolute inset-y-0 right-0 flex py-1.5 pr-1.5"
                          >
                            <mat-icon class="mat-18 mr-2">vpn_key</mat-icon>
                          </div>
                        </div>
                        <div class="flex justify-between">
                          <mat-error
                            *ngIf="
                              cuenta.controls['pincode'].hasError('pattern')
                            "
                            class="text-xs"
                          >
                            Solo caracteres numericos
                          </mat-error>
                          <mat-hint align="end" class="text-xs"
                            >{{ pinCode.value.length }} / 4</mat-hint
                          >
                        </div>
                      </div>
                      <div class="flex my-4">
                        <ng-container *ngIf="modificar; else Guardar">
                          <div class="flex justify-center gap-2 mt-6 w-full">
                            <button
                            type="submit"
                            (click)="isEditar()"
                            class="w-full inline-flex p-2 mx-4 rounded-2xl text-white  font-semibold justify-center items-center bg-red-600"
                            >
                            <mat-icon class="mx-2">edit</mat-icon> Modificar
                            </button>
                          </div>
                        
                        </ng-container>
                        <ng-template #Guardar>
                          <div class="flex justify-center gap-2 mt-6 w-full">
                            <button
                            type="submit"
                            [disabled]="cuenta.invalid"
                            (click)="updateAccount()"
                            class="w-full inline-flex p-2 mx-4 rounded-2xl text-white font-semibold justify-center items-center  border-2 border-white "
                            >
                            <mat-icon class="mx-2">edit</mat-icon> Guardar
                            </button>
                          </div>
                          
                        </ng-template>
                      </div>
                      <div class="flex justify-center items-center space-x-4">
                        <a
                          href="http://play.google.com/store/apps/details?id=com.gnettv.android&hl=en"
                          target="_blank"
                        >
                          <img
                            src="https://www.svgrepo.com/show/303139/google-play-badge-logo.svg"
                            width="130"
                            height="110"
                            alt=""
                          />
                        </a>
                        <a
                          href="https://apps.apple.com/uz/app/g-tv/id6450960460"
                          target="_blank"
                          rel="noopener noreferrer"
                        >
                          <img
                            src="https://www.svgrepo.com/show/303128/download-on-the-app-store-apple-logo.svg"
                            width="130"
                            height="110"
                            alt=""
                          />
                        </a>
                        <a
                          href="https://channelstore.roku.com/es-mx/details/2b6f7a91903cd81be416208e0802faf6/g-tv"
                          target="_blank"
                          rel="noopener noreferrer"
                        >
                          <img
                            src="../../../../../../../assets/img/downloadRoku.png"
                            width="130"
                            height="110"
                            alt=""
                          />
                        </a>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="p-2 sm:p-10 text-center cursor-pointer text-white">
        <div
          class="py-16 max-w-lg mx-auto rounded-2xl overflow-hidden shadow-lg bg-red-700 hover:bg-black transition duration-400"
        >
          <div class="space-y-4">
            <div class="flex flex-col items-center justify-center">
              <i class="fa fa-tv p2 items-center" style="font-size: 50px"></i>
              <span class="text-sm font-light my-2"
                >{{ cuentaTv?.deviceCount || '' }} PANTALLAS</span
              >
            </div>

            <div class="px-6 py-2">
              <div class="space-y-4">
                <div class="flex justify-around">
                  <div class="gap-y-4">
                    <div
                      class="flex justify-center items-center rounded-full w-20 h-20 bg-white shadow-lg shadow-gray-500/50 ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300"
                      (click)="verPantallaDisponibles()"
                    >
                      <i
                        class="fa fa-tv p2 text-red-700 items-center"
                        style="font-size: 25px"
                      ></i>
                    </div>
                    <span class="text-sm font-light py-4"
                      >{{ cuentaTv.activationCodes.length }} DISPONIBLES</span
                    >
                  </div>
                  <div>
                    <div
                      class="flex justify-center items-center rounded-full w-20 h-20 bg-white shadow-lg shadow-gray-500/50 ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300"
                      (click)="
                        cuentaTv.devices.length > 0
                          ? verPantallaUtilizadas()
                          : ''
                      "
                    >
                      <i
                        class="fa fa-tv p2 text-green-700 items-center"
                        style="font-size: 25px"
                      ></i>
                    </div>
                    <span class="gap-y-4 text-sm font-light my-4"
                      >{{ cuentaTv.devices.length }} OCUPADAS</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="p-2 sm:p-10 text-center cursor-pointer translate-x-2"
        *ngIf="contrato.contract_detail_product.length > 0"
      >
        <div
          class="py-16 max-w-sm rounded overflow-hidden shadow-lg hover:bg-white transition duration-500 bg-white"
        >
          <div class="space-y-4">
            <div class="flex flex-col items-center justify-center">
              <i class="fa fa-film" style="font-size: 50px"></i>
              <span class="text-sm font-light my-2">TV BOX</span>
            </div>

            <div class="px-6 py-2">
              <div class="space-y-4">
                <div class="flex justify-around">
                  <div
                    class="flex justify-center items-center rounded-full w-20 h-20 bg-red-700 shadow-lg shadow-gray-500/50 ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300"
                    (click)="verTvBox(tvbox)"
                    *ngFor="let tvbox of contrato.contract_detail_product"
                  >
                    <i
                      class="fa fa-film p2 text-gray-50 items-center"
                      style="font-size: 25px"
                    ></i>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="px-6 py-2">
                            <div class="space-y-4">
                                <div class="font-bold text-xl mb-2">TV BOX</div>
                                <p class="text-lg font-mono">
                                    <dd class="flex justify-between "
                                        >
                                        <span>{{tvbox.product_name}}</span><span>serial: {{tvbox.serial}}</span>
                                    </dd>


                                </p>
                            </div>
                        </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
