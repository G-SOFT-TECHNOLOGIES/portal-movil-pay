<div class="flex justify-between gap-2 self-center mx-8">
  <div class="flex items-center gap-2 mt-16 mx-4">
    <a [routerLink]="['/home/gtv/planes']" mat-mini-fab color="warn">
      <mat-icon>chevron_left</mat-icon>
    </a>
    <div>
      <span class="inline-flex justify-center items-center">
        <img src="../../../../../assets/img/logotvplusnegro.svg" alt="" class="w-1/2" />
      </span>
    </div>
  </div>

  <div class="flex justify-end mx-4">
    <div class="flex flex-col justify-end w-full text-center">
      <div class="inline-flex items-center gap-2 p-2">
        <svg width="68" height="81" viewBox="0 0 68 81" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M30.2105 40.3157C30.8805 40.3157 31.5231 40.5819 31.9968 41.0556C32.4706 41.5294 32.7368 42.172 32.7368 42.842C32.7368 43.512 32.4706 44.1546 31.9968 44.6284C31.5231 45.1021 30.8805 45.3683 30.2105 45.3683H22.6315C21.9615 45.3683 21.3189 45.1021 20.8452 44.6284C20.3714 44.1546 20.1052 43.512 20.1052 42.842C20.1052 42.172 20.3714 41.5294 20.8452 41.0556C21.3189 40.5819 21.9615 40.3157 22.6315 40.3157H30.2105ZM45.3683 32.7368C45.3683 32.0667 45.1021 31.4242 44.6284 30.9504C44.1546 30.4766 43.512 30.2105 42.842 30.2105H22.6315C21.9615 30.2105 21.3189 30.4766 20.8452 30.9504C20.3714 31.4242 20.1052 32.0667 20.1052 32.7368C20.1052 33.4068 20.3714 34.0494 20.8452 34.5231C21.3189 34.9969 21.9615 35.2631 22.6315 35.2631H42.842C43.512 35.2631 44.1546 34.9969 44.6284 34.5231C45.1021 34.0494 45.3683 33.4068 45.3683 32.7368ZM22.6315 25.1578H42.842C43.512 25.1578 44.1546 24.8917 44.6284 24.4179C45.1021 23.9441 45.3683 23.3016 45.3683 22.6315C45.3683 21.9615 45.1021 21.3189 44.6284 20.8452C44.1546 20.3714 43.512 20.1052 42.842 20.1052H22.6315C21.9615 20.1052 21.3189 20.3714 20.8452 20.8452C20.3714 21.3189 20.1052 21.9615 20.1052 22.6315C20.1052 23.3016 20.3714 23.9441 20.8452 24.4179C21.3189 24.8917 21.9615 25.1578 22.6315 25.1578ZM52.9472 59.1215V68.8049C52.9474 69.1652 52.8407 69.5176 52.6405 69.8173C52.4404 70.117 52.1559 70.3506 51.8229 70.4885C51.49 70.6265 51.1236 70.6625 50.7702 70.5922C50.4167 70.5218 50.0921 70.3482 49.8373 70.0933L47.8946 68.1531L45.9519 70.0933C45.6971 70.3482 45.3725 70.5218 45.0191 70.5922C44.6656 70.6625 44.2992 70.6265 43.9663 70.4885C43.6334 70.3506 43.3488 70.117 43.1487 69.8173C42.9486 69.5176 42.8418 69.1652 42.842 68.8049V59.1215C40.9153 58.0145 39.4087 56.3015 38.5569 54.2492C37.7051 52.1969 37.5559 49.9205 38.1324 47.7745C38.709 45.6286 39.979 43.7335 41.7447 42.3844C43.5103 41.0354 45.6726 40.308 47.8946 40.3157C48.7486 40.3264 49.5977 40.4469 50.4209 40.6744V22.6315C50.4209 20.6215 49.6224 18.6938 48.2011 17.2724C46.7798 15.8511 44.8521 15.0526 42.842 15.0526H22.6315C20.6215 15.0526 18.6938 15.8511 17.2724 17.2724C15.8511 18.6938 15.0526 20.6215 15.0526 22.6315V52.9472C15.0526 54.9573 15.8511 56.885 17.2724 58.3063C18.6938 59.7277 20.6215 60.5262 22.6315 60.5262H35.2631C35.9331 60.5262 36.5757 60.7923 37.0494 61.2661C37.5232 61.7399 37.7894 62.3824 37.7894 63.0525C37.7894 63.7225 37.5232 64.3651 37.0494 64.8388C36.5757 65.3126 35.9331 65.5788 35.2631 65.5788H22.6315C19.2827 65.5748 16.0721 64.2426 13.7041 61.8746C11.3361 59.5066 10.004 56.2961 10 52.9472V22.6315C10.004 19.2827 11.3361 16.0721 13.7041 13.7041C16.0721 11.3361 19.2827 10.004 22.6315 10L42.842 10C46.1909 10.004 49.4014 11.3361 51.7694 13.7041C54.1374 16.0721 55.4695 19.2827 55.4735 22.6315V43.807C56.4631 44.9184 57.1917 46.2369 57.6058 47.6662C58.0199 49.0955 58.1091 50.5993 57.8669 52.0675C57.6247 53.5357 57.0572 54.9312 56.206 56.1517C55.3548 57.3722 54.2413 58.3869 52.9472 59.1215ZM52.9472 50.4209C52.9472 49.4216 52.6509 48.4447 52.0957 47.6138C51.5405 46.7829 50.7514 46.1353 49.8282 45.7529C48.9049 45.3705 47.889 45.2704 46.9089 45.4654C45.9288 45.6603 45.0285 46.1416 44.3219 46.8482C43.6153 47.5548 43.134 48.4551 42.9391 49.4352C42.7441 50.4153 42.8442 51.4312 43.2266 52.3545C43.609 53.2777 44.2566 54.0668 45.0875 54.622C45.9184 55.1772 46.8953 55.4735 47.8946 55.4735C49.2346 55.4735 50.5198 54.9412 51.4674 53.9937C52.4149 53.0461 52.9472 51.761 52.9472 50.4209Z"
            fill="#595959" />
        </svg>
        <span class="text-3xl font-semibold">Nº: {{ contrato }}</span>
      </div>
      <div class="flex flex-col text-center" *ngIf="acumulado | async as acumulado; else Cero">
        <p class="text-3xl font-semibold">$ {{ acumulado | number : "1.2-2" }}</p>
        <p class="text-base font-semibold">
          Pago mensual actual :
        </p>
      </div>

      <ng-template #Cero>
        <div class="flex flex-col text-center">
          <p class="text-3xl font-semibold">$ {{ 0 | number : "1.2-2" }}</p>
          <p class="text-base font-semibold">
            Pago mensual actual :
          </p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
<div class="max-w-screen-xl self-center mx-auto p-2">
  <div class="grid xl:grid-cols-2 gap-2 w-full mx-auto">
    <div class="flex flex-wrap gap-4">
      <app-package-gtv *ngFor="let item of packages" [paquetes]="item"></app-package-gtv>


    </div>
    <div class="w-full flex-1 items-start">
      <section class="items-center px-5 py-8">
        <div class="w-full flex flex-col m-4 p-4 text-red-700 border rounded-lg shadow-xl mx-auto my-4">
          <dl class="my-6 space-y-4">
            <div *ngIf="planActivo | async as planActivo">
              <div class="flex items-center justify-between my-4 border-b border-gray-200 py-2"
                *ngFor="let plan of planActivo">
                <dt class="text-base text-gray-600 font-medium">
                  {{ plan.name }}
                </dt>
                <dd class="text-xl font-medium text-gray-900">
                  ${{ plan?.cost || 0.0 | number : "1.2-2" }}
                </dd>
              </div>
            </div>
            <div *ngIf="paquetes | async as paquetes">
              <div class="flex items-center justify-between my-4 border-b border-gray-200 py-2"
                *ngFor="let paq of paquetes">
                <dt class="text-base text-gray-600 font-medium">
                  {{ paq.name }}
                </dt>
                <dd class="text-xl font-medium text-gray-900">
                  ${{ paq?.price || 0.0 | number : "1.2-2" }}
                </dd>
              </div>
            </div>
          </dl>
          <div class="flex items-center justify-between px-6">
            <div class="inline-flex gap-2 items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="mr-4 icon icon-tabler icon-tabler-alert-triangle"
                width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <circle cx="12" cy="12" r="9"></circle>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                <polyline points="11 12 12 12 12 16 13 16"></polyline>
              </svg>
              <p class="text-sm lg:text-2xl font-semibold tracking-wide uppercase">
                TOTAL
              </p>
            </div>
            <div>
              <dd class="text-2xl font-medium" *ngIf="acumulado | async as acumulado; else CERO">
                ${{ acumulado | number : "1.2-2" }} /
                <span class="text-xs">mensual</span>
              </dd>
            </div>
          </div>
        </div>
      </section>
      <div *ngIf="totalTvBox | async as totalTvBox">
        <section class="">
          <div class="relative items-center w-full py-4 mx-auto max-w-7xl">
            <div class="p-6 border-l-4 border-yellow-500 rounded-r-xl bg-yellow-100">
              <div class="flex">
                <div class="flex-shrink-0">
                  <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd"
                      d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z"
                      clip-rule="evenodd" />
                  </svg>
                </div>
                <div class="ml-3">
                  <ul role="list" class="text-base text-yellow-600 list-disc space-y-1 pl-5">
                    <li>
                      Antes de procesar el pago debe verificar que el
                      <strong>monto</strong> sea mayor o igual al monto a pagar
                      por el producto.
                    </li>
                    <li>
                      No se procesará el pago si el monto es menor al monto a
                      pagar.
                    </li>
                    <li>
                      Deberá contactar al área de Antención al Cliente en caso
                      de que haya cancelado un monto menor al costo del
                      producto.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <!-- <h2 class="text-lg font-medium text-gray-900">Order summary</h2> -->

      <!-- Order summary -->
      <section aria-labelledby="summary-heading"
        class="mt-16 border rounded-lg shadow-xl px-4 py-6 sm:p-6 lg:col-span-5 lg:mt-0 lg:p-8 w-full">
        <!-- *ngIf="montoMenor" -->

        <dl class="mt-6 space-y-4">
          <div class="flex items-center justify-between">
            <dt class="text-sm text-gray-600">Subtotal</dt>
            <dd class="text-sm font-medium text-gray-900">$0.00</dd>
          </div>
          <div class="flex items-center justify-between border-t border-gray-200 pt-4">
            <dt class="text-base font-medium text-gray-900">Total a Pagar</dt>
            <dd class="text-base font-medium text-gray-900" *ngIf="totalTvBox | async as totalTvBox; else CERO">
              ${{ totalTvBox | number : "1.2-2" }}
            </dd>
            <ng-template #CERO>
              <dd class="text-base font-medium text-gray-900">
                ${{ 0 | number : "1.2-2" }}
              </dd>
            </ng-template>
          </div>
        </dl>

        <div class="flex justify-center gap-2 mt-6" *ngIf="totalTvBox | async as totalTvBox; else Registrar">
          <button type="submit" (click)="pagar(totalTvBox)" [disabled]="aceptar"
            [ngClass]="!aceptar ? 'bg-red-600' : 'bg-neutral-400'" *ngIf="payments == null; else Registrar"
            class="w-full inline-flex p-2 mx-4 rounded-2xl text-white font-semibold justify-center items-center">
            <mat-icon class="mx-2">check_small</mat-icon> Pagar
          </button>
        </div>
        <ng-template #Registrar>
          <div class="flex justify-center gap-2 mt-6">
            <button type="submit" (click)="registrar()" [disabled]="aceptar"
              [ngClass]="!aceptar ? 'bg-red-600' : 'bg-neutral-400'"
              class="w-full inline-flex p-2 mx-4 rounded-2xl text-white font-semibold justify-center items-center">
              <mat-icon class="mx-2">check_small</mat-icon> Registrar
            </button>
          </div>
        </ng-template>
      </section>
      <app-terminos (response)="aceptar = $event"></app-terminos>
    </div>
  </div>
  <!-- <div class="flex justify-center gap-2">
    <button
      class="p-3 rounded-full text-white w-1/2 font-semibold text-xl bg-red-600"
      (click)="registrar()"
    >
      Finalizar
    </button>
  </div> -->
</div>